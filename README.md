# TaskFlow

## 개발 프로세스

### 1. 프로젝트 설명
- Intro: 아웃소싱 프로젝트
    - 본 프로젝트는 아웃소싱 형태로 진행된 팀 백엔드 프로젝트입니다.

- 구현된 프론트엔드: https://taskflow-ten-tan.vercel.app/
    - `ID`: admin / `PW`: password


### 2. 프로젝트 목적
- 기업용 태스크 관리 시스템(TaskFlow)의 백엔드를 구현한다.
- 역할 기반 인증/인가, 태스크/댓글 관리, AOP 기반 로깅, 대시보드 통계 등 다양한 백엔드 기능을 실습한다.
- 실제 외주 프로젝트 상황에 가까운 개발 경험을 통해 실무 감각을 향상시킨다.

## 팀 소개 & 팀원 역할

### 팀명
- 16조 | Team Outsourcing

### 팀원 역할

|  이름  | 담당 기능 |
|--------|-----------|
| 김원준 | 태스크(Task) 관리, 대시보드 |
| 이다인 | 댓글(Comment) |
| 임태훈 | 활동 로그, AOP |
| 천세경 | 사용자(User) |
| 한재현 | 인증/인가(Auth) |

### 협업 방식
- **Git Flow 전략**을 적용하여 `dev` 브랜치에서 `feature/기능명` 브랜치 분기 후 병합
- **Pull Request**와 **코드 리뷰**를 통한 협업
- **Issue 관리**는 GitHub Issues + Projects 기능 활용
- **코드 컨벤션**: 팀 내 규칙 정리 및 Google Java Style 일부 준수


## 기능 설계

### 1. ERD
![ERD 이미지](![ERD.png](ERD.png))

### 2. API 명세서
- [API 명세서](https://www.notion.so/teamsparta/2112dc3ef514802ebb01ca0cdb8d166a?v=2112dc3ef51480679a9c000cb6dfb7fe)


## 기능 설명

### 1. 회원가입/로그인
- JWT를 활용한 로그인 및 인가 구현
- Spring Security 기반 보안 설정 적용

### 2. 태스크(Task) 관리
- 태스크 생성, 수정, 삭제, 상태 변경 (`TODO` → `IN_PROGRESS` → `DONE`)
- 팀 단위 작업 분류 및 필터링 기능 제공
- 대시보드에 활용 가능한 상태별 카운트 반환 API 포함

### 3. 댓글(Comment)
- 각 태스크 별 댓글 등록, 수정, 삭제 기능
- 사용자 및 작성일 기반 정렬 제공

### 4. 대시보드
- 사용자 별, 팀 별 할당된 태스크 통계 제공
- 태스크 상태별 비율 및 할당된 사용자 정보 포함

### 5. 활동 로그
- AOP 기반의 자동 로깅 시스템 구현
- 주요 API 요청 시 `사용자 ID`, `URL`, `HTTP Method`, `요청 시간` 등을 로그에 저장

## 트러블슈팅

<details>
  <summary>1. 로그 기록 시점 제어 문제</summary>

#### [원인 분석]
- AOP를 통한 로그 기록 시, 서비스 메서드 실행 전/후 중 어느 시점에서 로그를 남겨야 할지 명확하지 않았다.

#### [해결 방법]
- `@AfterReturning` 어노테이션을 적용하여 정상적으로 메서드가 종료된 이후에만 로그를 기록하도록 시점 제어했다.
</details>

<details>
  <summary>2. userId/targetId 추출 문제</summary>

#### [원인 분석]
- 각 API의 파라미터 구조가 달라서 사용자 ID나 타겟 ID를 일관되게 추출하기 어려웠다.

#### [해결 방법]
- 커스텀 어노테이션을 만들어 사용자 ID 또는 타겟 ID를 지정하고,
  리플렉션을 활용하여 해당 필드에 접근해 값 추출하도록 AOP 로직을 설계했다.
</details>

<details>
  <summary>3. 불필요한 로그 저장 문제</summary>

#### [원인 분석]
- 예외 발생 시에도 로그가 저장되어 정상 요청과 실패 요청이 구분되지 않았다.
    - 결과적으로 실패한 요청까지 활동 기록에 포함되어 혼란을 유발한다.

#### [해결 방법]
- `@AfterReturning` 방식으로 정상적으로 처리된 경우에만 로그가 남도록 제어하고,
  예외가 발생한 경우는 로깅 대상에서 제외되도록 했다.
</details>

<details>
  <summary>4. Creat시 Id 미생성 문제</summary>

#### [원인 분석]
- 생성 요청 시 DTO 내부에 아직 DB에 저장되지 않은 ID를 포함하려다 보니, 로그에 타겟 ID가 누락되는 문제 발생했다.

#### [해결 방법]
- 서비스 로직에서 DB 저장 후 반환되는 Entity의 ID를 기반으로 로그에 타겟 targetId 기록했다.
</details>

<details>
  <summary>5. Enum 관리 문제</summary>

#### [원인 분석]
- 활동 유형을 나타내는 Enum 값들이 점점 많아지면서, 오타나 중복 가능성이 증가했다.

#### [해결 방법]
- Enum 값에 Prefix를 부여하여 그룹화했다.
    - 예: `TASK_CREATED`, `TASK_UPDATED`, `COMMENT_CREATED`
</details>

<details>
  <summary>6. Id 식별 문제</summary>

#### [원인 분석]
- 로그 기록 시 공통 필드만 사용하다 보니 어떤 ID가 어떤 리소스를 의미하는지 명확하지 않았다.

#### [해결 방법]
- 각 로그에 activityType 필드를 함께 저장하여 ID의 의미를 명확히 구분했다.
</details>

## 후기
- 실제 현업과 비슷한 개발 환경을 경험할 수 있어 좋았습니다.
- Git Flow 전략과 PR, 코드 리뷰를 적극 활용해 의사소통과 코드 품질 관리가 원활했습니다.
- AOP를 이용한 활동 로그 자동화는 처음 접하는 개념이었지만, 적용 후 유지보수가 훨씬 편해졌습니다.